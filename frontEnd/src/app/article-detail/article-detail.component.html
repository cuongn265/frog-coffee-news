<div *ngIf="article" class="article-detail">
  <header [ngStyle]="{'background-image': 'linear-gradient(rgba(0, 0, 0, 0.51), rgba(0, 0, 0, 0.85)), url(' + article.header_image + ')'}">
    <div class="row" style="position: relative">
      <div class="col-md-10">
        <div class="content">
          <h1>{{article.title}}</h1>
          <h3 class="description">{{article.description}}</h3>
        </div>
      </div>
      <div class="author">
        <p>by <b>{{article.author}}</b></p>
      </div>
    </div>
  </header>
  <div class="row article-content-row">
    <div class="col-md-2 col-sm-2 col-xs-12">
      <p><b>Publish by:</b></p>
      <div>
        <figure>
          <img src="https://byuc.files.wordpress.com/2012/07/avat-2.jpg" alt="#" style="height: 80px; width: 80px; border-radius: 50%">
        </figure>
        <h6>{{article.author}}</h6>
        <h6>{{article.date | date:'medium'}}</h6>
      </div>
    </div>
    <div class="col-md-7 col-sm-7 col-xs-12 article-body">
      <div [innerHTML]="article.content" class="text-body"></div>
    </div>
    <div class="col-md-3 col-sm-3 col-xs-12 related-articles">
      <p><b>Related Stories</b></p>
      <div *ngIf="relatedArticleList">
        <div class="row related-article-row" *ngFor="let relatedArticle of relatedArticleList | slice:0:4; let i = index" [hidden]="relatedArticleList[i].idArticle == article.idArticle"
          style="margin-bottom: 20px" [routerLink]="[ '/news/', categoryName, relatedArticle.idArticle]">
          <div class="col-md-4 col-sm-12">
            <img [src]="relatedArticle.header_image" alt="img" style="width: 80px; height: 80px">
          </div>
          <div class="col-md-8 col-sm-12">
            <p>{{relatedArticle.title}}</p>
            <!--<p>{{relatedArticle.date}}</p>-->
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="comment-line col-md-7 col-sm-7 col-md-offset-2 col-sm-offset-2">
      <h4>Share to your friends</h4>
      <div class="line"></div>
    </div>
  </div>
  <div class="row">
    <div class="col-md-7 col-sm-7 col-md-offset-2 col-sm-offset-2">
      <share-buttons [pinterest]="false"></share-buttons>
    </div>
  </div>
  <div class="row">
    <div class="comment-line col-md-7 col-sm-7 col-md-offset-2 col-sm-offset-2">
      <h4>Comments</h4>
      <div class="line"></div>
    </div>
    <!-- User comment box -->
    <div class="col-md-7 col-sm-7 col-md-offset-2 col-sm-offset-2" *ngIf="authService.authenticated()">
      <md-list>
        <md-list-item>
          <img md-list-avatar src="https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-512.png" alt="user-avatar">
          <md-input-container style=" width: 100%; padding-left: 16px;">
            <textarea md-input placeholder="Leave a comment as {{user.firstName}} {{user.lastName}}" maxlength="300" required #characterCountComment
              rows="3" [(ngModel)]="commentContent"></textarea>
            <md-hint align="end">{{characterCountComment.value.length}} / 300</md-hint>
          </md-input-container>
          <div style="margin-left: 3px;" [hidden]="submittingComment">
            <button md-icon-button (click)="comment()">
          <md-icon color="primary"> send </md-icon>
            </button>
          </div>
          <!-- Comment submit spinner -->
          <div id="circleG" *ngIf="submittingComment">
            <div id="circleG_1" class="circleG"></div>
            <div id="circleG_2" class="circleG"></div>
            <div id="circleG_3" class="circleG"></div>
          </div>
        </md-list-item>
      </md-list>
    </div>
    <!-- End of user comment box -->
    <div class="col-md-7 col-sm-7 col-md-offset-2 col-sm-offset-2" *ngIf="commentList">
      <!-- List of comment -->
      <md-list>
        <div *ngFor="let comment of commentList">
          <md-list-item>
            <img md-list-avatar src="https://cdn1.iconfinder.com/data/icons/user-pictures/100/male3-512.png" alt="user-avatar">
            <h2 md-line> {{comment.firstName + ' ' + comment.lastName}} </h2>
            <p md-line>
              {{getCommentPeriod(comment.time)}}
                <span class="pull-right" *ngIf="authService.authenticated() && authService.userProfile">
                  <button md-icon-button [md-menu-trigger-for]="menu" *ngIf="comment.idUser == user.idUser || authService.userProfile.role == 1" >
                    <md-icon>more_vert</md-icon>
                  </button>
                </span>
            </p>
          </md-list-item>
          <md-menu #menu="mdMenu">
            <button md-menu-item *ngIf="comment.idUser == user.idUser" (click)="modifyComment($event, comment); closeCommentMenu()"> Modify... </button>
            <button md-menu-item (click)="removeComment($event, comment); closeCommentMenu()"> Remove... </button>
          </md-menu>
          <div class="comment-content">
            <p>{{comment.content}}</p>
          </div>
          <hr class="comment-divider">
        </div>
      </md-list>
    </div>
  </div>
</div>
